<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroAssist - Your Smart Farming Partner</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- General Styling --- */
        :root {
            --primary-color: #4CAF50;
            --secondary-color: #81C784;
            --accent-color: #FF9800;
            --advanced-color: #2196F3; /* For subsequent farmers */
            --background-color: #f4f4f9;
            --card-background: #ffffff;
            --text-color: #333333;
            --border-color: #dddddd;
            --shadow: 0 4px 8px rgba(0,0,0,0.1);
            --light-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .container {
            max-width: 900px;
            margin: 20px auto;
            padding: 0 20px;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 0;
            text-align: center;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        header h1 {
            margin: 0;
            font-size: 2.5rem;
        }

        .user-type-container {
            display: flex;
            justify-content: center;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .user-type-btn {
            background-color: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            color: white;
            padding: 8px 15px;
            margin: 5px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .user-type-btn.active {
            background-color: white;
            color: var(--primary-color);
        }

        .user-type-btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        .user-type-btn.active:hover {
            background-color: white;
        }

        section {
            background-color: var(--card-background);
            margin-top: 2rem;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 0.5rem;
            margin-top: 0;
        }
        
        h2.advanced { color: var(--advanced-color); border-bottom-color: #90CAF9; }

        .hidden {
            display: none;
        }

        /* --- Form Styling --- */
        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        input[type="number"],
        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="time"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 1rem;
            box-sizing: border-box;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* --- Radio Button & Visual Selector Styling --- */
        .radio-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .radio-option {
            flex: 1;
            min-width: 150px;
        }

        .radio-option input[type="radio"],
        .radio-option input[type="checkbox"] {
            display: none;
        }
        
        .radio-option label {
            display: block;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #fff;
        }

        .radio-option input[type="radio"]:checked + label,
        .radio-option input[type="checkbox"]:checked + label {
            border-color: var(--primary-color);
            background-color: #e8f5e9;
            font-weight: bold;
        }
        
        /* --- Button Styling --- */
        button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #45a049;
        }

        button.secondary {
            background-color: var(--accent-color);
        }
        button.secondary:hover { background-color: #e68900; }

        button.advanced {
            background-color: var(--advanced-color);
        }
        button.advanced:hover { background-color: #0b7dda; }

        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        /* --- Result Card & Dashboard Card Styling --- */
        .result-card, .dashboard-card {
            margin-top: 1.5rem;
            padding: 1.5rem;
            border-left: 5px solid var(--primary-color);
            background-color: #f9f9f9;
            border-radius: 5px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .dashboard-card { cursor: pointer; }
        .dashboard-card:hover { transform: translateY(-5px); box-shadow: var(--shadow); }
        .dashboard-card.advanced { border-left-color: var(--advanced-color); }

        .result-card h3, .dashboard-card h3 {
            margin-top: 0;
            color: var(--primary-color);
        }
        .dashboard-card.advanced h3 { color: var(--advanced-color); }
        
        .dashboard-card p { color: #555; }
        .dashboard-card i { font-size: 2.5rem; color: var(--primary-color); margin-bottom: 1rem; }
        .dashboard-card.advanced i { color: var(--advanced-color); }

        /* --- Mentorship Section Styling --- */
        .mentor-card {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            gap: 1rem;
            align-items: center;
            transition: all 0.3s ease;
        }

        .mentor-card:hover {
            box-shadow: var(--shadow);
            transform: translateY(-2px);
        }

        .mentor-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            flex-shrink: 0;
        }

        .mentor-info {
            flex-grow: 1;
        }

        .mentor-info h3 {
            margin-top: 0;
            margin-bottom: 0.5rem;
        }

        .mentor-specialties {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .specialty-tag {
            background-color: #e8f5e9;
            color: var(--primary-color);
            padding: 0.25rem 0.75rem;
            border-radius: 30px;
            font-size: 0.8rem;
        }

        .mentor-actions {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* --- Tab Navigation --- */
        .tab-nav {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 1.5rem;
        }

        .tab-nav button {
            background: none;
            border: none;
            padding: 1rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            color: #777;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .tab-nav button.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* --- Scheduling Modal --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: var(--card-background);
            margin: 10% auto;
            padding: 2rem;
            border: none;
            width: 80%;
            max-width: 500px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover, .close:focus { color: var(--text-color); text-decoration: none; cursor: pointer; }

        .session-card {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .session-info h4 { margin: 0 0 0.5rem 0; }
        .session-info p { margin: 0; color: #555; font-size: 0.9rem; }

        .session-type-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 30px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        .session-type-badge.online { background-color: #e3f2fd; color: #0d47a1; }
        .session-type-badge.offline { background-color: #fff3e0; color: #e65100; }

        /* --- Advanced Features Styling --- */
        .feature-card {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--advanced-color);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--light-shadow);
        }

        .feature-card h3 {
            margin-top: 0;
            color: var(--advanced-color);
        }

        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .data-item {
            background-color: white;
            padding: 1rem;
            border-radius: 6px;
            box-shadow: var(--light-shadow);
            text-align: center;
        }

        .data-item .value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--advanced-color);
        }

        .data-item .label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }

        .price-trend {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
            justify-content: center;
        }

        .trend-up {
            color: #4CAF50;
        }

        .trend-down {
            color: #f44336;
        }

        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .equipment-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--light-shadow);
            transition: transform 0.3s ease;
        }

        .equipment-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .equipment-image {
            height: 150px;
            background-color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
        }

        .equipment-details {
            padding: 1rem;
        }

        .equipment-details h4 {
            margin-top: 0;
            color: var(--advanced-color);
        }

        .equipment-price {
            font-weight: bold;
            color: var(--primary-color);
            margin-top: 0.5rem;
        }

        .back-btn {
            background-color: #666;
            margin-bottom: 1rem;
        }

        .back-btn:hover {
            background-color: #555;
        }

        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            .container { padding: 0 10px; }
            section { padding: 1.5rem; }
            header h1 { font-size: 2rem; }
            .radio-group { flex-direction: column; }
            .mentor-card { flex-direction: column; text-align: center; }
            .mentor-actions { flex-direction: row; justify-content: center; }
            .modal-content { margin: 5% auto; width: 95%; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>üåæ AgroAssist</h1>
            <div class="user-type-container">
                <button class="user-type-btn" id="experienced-farmer-btn">Experienced (Mentor)</button>
                <button class="user-type-btn" id="subsistent-farmer-btn">Subsistent (Learner)</button>
                <button class="user-type-btn active" id="subsequent-farmer-btn">Subsequent (Scaler)</button>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- User Type Selection Section -->
        <section id="user-type-selection">
            <h2>Select Your Role</h2>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="experienced-type" name="user-type" value="experienced">
                    <label for="experienced-type"><i class="fas fa-user-tie fa-3x"></i><span>Experienced Farmer</span><small>Guide others</small></label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="subsistent-type" name="user-type" value="subsistent">
                    <label for="subsistent-type"><i class="fas fa-seedling fa-3x"></i><span>Subsistent Farmer</span><small>Learn & Grow</small></label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="subsequent-type" name="user-type" value="subsequent" checked>
                    <label for="subsequent-type"><i class="fas fa-chart-line fa-3x"></i><span>Subsequent Farmer</span><small>Scale & Optimize</small></label>
                </div>
            </div>
        </section>

        <!-- Experienced Farmer (Mentor) Section -->
        <div id="experienced-farmer-content" class="hidden">
            <section id="mentor-profile-section">
                <h2>üë®‚Äçüè´ Become a Mentor</h2>
                <p>Share your expertise and guide the next generation of farmers. Complete your profile to start mentoring.</p>
                <form id="mentor-form">
                    <div class="form-group"><label for="mentor-name">Your Name</label><input type="text" id="mentor-name" placeholder="Enter your full name" required></div>
                    <div class="form-group"><label for="mentor-region">Your Region</label><select id="mentor-region" required><option value="">-- Select your Region --</option><option value="Karnataka">Karnataka</option><option value="Tamil Nadu">Tamil Nadu</option><option value="Maharashtra">Maharashtra</option><option value="Telangana">Telangana</option><option value="Punjab">Punjab</option><option value="Gujarat">Gujarat</option><option value="West Bengal">West Bengal</option></select></div>
                    <div class="form-group"><label for="mentor-contact">Contact Information</label><input type="tel" id="mentor-contact" placeholder="Your phone number" required></div>
                    <div class="form-group"><label for="mentor-experience">Years of Farming Experience</label><input type="number" id="mentor-experience" min="5" placeholder="e.g., 15" required></div>
                    <div class="form-group"><label>Your Farming Specialties (Select all that apply)</label><div class="radio-group"><div class="radio-option"><input type="checkbox" id="specialty-organic" name="specialties" value="Organic Farming"><label for="specialty-organic">Organic Farming</label></div><div class="radio-option"><input type="checkbox" id="specialty-irrigation" name="specialties" value="Irrigation"><label for="specialty-irrigation">Irrigation</label></div><div class="radio-option"><input type="checkbox" id="specialty-pest" name="specialties" value="Pest Management"><label for="specialty-pest">Pest Management</label></div><div class="radio-option"><input type="checkbox" id="specialty-crops" name="specialties" value="Crop Rotation"><label for="specialty-crops">Crop Rotation</label></div></div></div>
                    <div class="form-group"><label for="mentor-bio">Brief Bio</label><textarea id="mentor-bio" placeholder="Tell us about your farming experience and expertise" required></textarea></div>
                    <button type="submit">Save Mentor Profile</button>
                </form>
            </section>
            <section id="mentor-dashboard" class="hidden"><h2>üìä Mentor Dashboard</h2><div class="result-card"><h3>Your Profile</h3><p id="dashboard-profile-info"></p></div><div class="result-card"><h3>Pending Mentorship Requests</h3><div id="pending-requests"><p>No new requests at the moment.</p></div></div></section>
        </div>

        <!-- Subsistent Farmer (Learner) Section -->
        <div id="subsistent-farmer-content" class="hidden">
            <section id="subsistent-basic-info"><h2>Welcome to AgroAssist!</h2><p>Connect with experienced farmers in your region to learn and grow your farming practice.</p><form id="learner-form"><div class="form-group"><label for="learner-name">Your Name</label><input type="text" id="learner-name" placeholder="Enter your full name" required></div><div class="form-group"><label for="learner-region">Your Region</label><select id="learner-region" required><option value="">-- Select your Region --</option><option value="Karnataka">Karnataka</option><option value="Tamil Nadu">Tamil Nadu</option><option value="Maharashtra">Maharashtra</option><option value="Telangana">Telangana</option><option value="Punjab">Punjab</option><option value="Gujarat">Gujarat</option><option value="West Bengal">West Bengal</option></select></div><button type="submit">Find Mentors</button></form></section>
            <section id="mentor-matching" class="hidden"><h2>ü§ù Find Your Farming Mentor</h2><div id="mentors-list"></div></section>
            <section id="communication" class="hidden"><h2>üí¨ Mentor Connect</h2><div class="tab-nav"><button class="tab-btn active" data-tab="connections">My Mentors</button><button class="tab-btn" data-tab="sessions">Scheduled Sessions</button></div><div class="tab-content active" id="connections-tab"><div id="my-mentors-list"><p>You haven't connected with any mentors yet.</p></div></div><div class="tab-content" id="sessions-tab"><div id="scheduled-sessions-list"><p>You have no scheduled sessions.</p></div></div></section>
        </div>

        <!-- Subsequent Farmer (Scaler) Section -->
        <div id="subsequent-farmer-content">
            <section id="subsequent-farmer-setup">
                <h2>Welcome, Future Farming Leader!</h2>
                <p>Let's set up your profile to connect you with the right tools and mentors to scale your operation.</p>
                <form id="subsequent-form">
                    <div class="form-group">
                        <label for="subsequent-name">Your Name</label>
                        <input type="text" id="subsequent-name" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="subsequent-region">Your Region</label>
                        <select id="subsequent-region" required>
                            <option value="">-- Select your Region --</option>
                            <option value="Karnataka">Karnataka</option>
                            <option value="Tamil Nadu">Tamil Nadu</option>
                            <option value="Maharashtra">Maharashtra</option>
                            <option value="Telangana">Telangana</option>
                            <option value="Punjab">Punjab</option>
                            <option value="Gujarat">Gujarat</option>
                            <option value="West Bengal">West Bengal</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="farm-scale">Current Farm Scale</label>
                        <select id="farm-scale" required>
                            <option value="">-- Select your scale --</option>
                            <option value="small">Small (1-5 acres)</option>
                            <option value="medium">Medium (5-20 acres)</option>
                            <option value="large">Large (20+ acres)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Primary Goal</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="goal-yield" name="goal" value="yield" checked>
                                <label for="goal-yield">Increase Yield</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="goal-diversify" name="goal" value="diversify">
                                <label for="goal-diversify">Diversify Crops</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="goal-market" name="goal" value="market">
                                <label for="goal-market">Improve Market Access</label>
                            </div>
                        </div>
                    </div>
                    <button type="submit">Go to Dashboard</button>
                </form>
            </section>
            
            <section id="subsequent-farmer-dashboard" class="hidden">
                <h2 class="advanced">üöÄ Your Farming Command Center</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    <div class="dashboard-card advanced" id="find-mentor-card">
                        <i class="fas fa-chalkboard-teacher"></i>
                        <h3>Find a Mentor</h3>
                        <p>Connect with experts to discuss scaling strategies.</p>
                    </div>
                    <div class="dashboard-card advanced" id="crop-analysis-card">
                        <i class="fas fa-seedling"></i>
                        <h3>Advanced Crop Analysis</h3>
                        <p>Get recommendations for high-yield, market-ready crops.</p>
                    </div>
                    <div class="dashboard-card advanced" id="market-intelligence-card">
                        <i class="fas fa-chart-area"></i>
                        <h3>Market Intelligence</h3>
                        <p>Analyze price trends, demand, and export opportunities.</p>
                    </div>
                    <div class="dashboard-card advanced" id="equipment-tech-card">
                        <i class="fas fa-tractor"></i>
                        <h3>Equipment & Tech Hub</h3>
                        <p>Explore modern machinery and farm technology.</p>
                    </div>
                </div>
            </section>

            <!-- Advanced Crop Analysis Section -->
            <section id="crop-analysis-section" class="hidden">
                <button class="back-btn" id="back-to-dashboard-crop">‚Üê Back to Dashboard</button>
                <h2 class="advanced">üå± Advanced Crop Analysis</h2>
                <p>Get data-driven insights to optimize your crop selection and maximize yield potential.</p>
                
                <div class="form-group">
                    <label for="analysis-region">Select Region</label>
                    <select id="analysis-region">
                        <option value="Karnataka">Karnataka</option>
                        <option value="Tamil Nadu">Tamil Nadu</option>
                        <option value="Maharashtra">Maharashtra</option>
                        <option value="Telangana">Telangana</option>
                        <option value="Punjab">Punjab</option>
                        <option value="Gujarat">Gujarat</option>
                        <option value="West Bengal">West Bengal</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="analysis-season">Select Season</label>
                    <select id="analysis-season">
                        <option value="kharif">Kharif (Monsoon)</option>
                        <option value="rabi">Rabi (Winter)</option>
                        <option value="zaid">Zaid (Summer)</option>
                    </select>
                </div>
                
                <button class="advanced" id="analyze-crops-btn">Analyze Crops</button>
                
                <div id="crop-analysis-results" class="hidden">
                    <h3>Recommended Crops for Your Region</h3>
                    <div class="data-grid">
                        <div class="data-item">
                            <div class="value">Wheat</div>
                            <div class="label">High Yield Potential</div>
                            <div class="price-trend trend-up"><i class="fas fa-arrow-up"></i> 12% increase</div>
                        </div>
                        <div class="data-item">
                            <div class="value">Rice</div>
                            <div class="label">Stable Market Demand</div>
                            <div class="price-trend trend-up"><i class="fas fa-arrow-up"></i> 8% increase</div>
                        </div>
                        <div class="data-item">
                            <div class="value">Cotton</div>
                            <div class="label">Premium Export Quality</div>
                            <div class="price-trend trend-up"><i class="fas fa-arrow-up"></i> 15% increase</div>
                        </div>
                    </div>
                    
                    <div class="feature-card">
                        <h3>Soil Analysis Recommendations</h3>
                        <p>Based on your region's soil composition, we recommend adding nitrogen-rich fertilizers and maintaining pH levels between 6.0-7.0 for optimal crop growth.</p>
                    </div>
                    
                    <div class="feature-card">
                        <h3>Weather Pattern Analysis</h3>
                        <p>The upcoming season shows 15% higher rainfall than average. Consider crops with good water tolerance and ensure proper drainage systems.</p>
                    </div>
                </div>
            </section>

            <!-- Market Intelligence Section -->
            <section id="market-intelligence-section" class="hidden">
                <button class="back-btn" id="back-to-dashboard-market">‚Üê Back to Dashboard</button>
                <h2 class="advanced">üìà Market Intelligence</h2>
                <p>Stay ahead of market trends with real-time price data and demand forecasts.</p>
                
                <div class="feature-card">
                    <h3>Current Market Prices</h3>
                    <div class="data-grid">
                        <div class="data-item">
                            <div class="value">‚Çπ2,250</div>
                            <div class="label">Wheat (per quintal)</div>
                            <div class="price-trend trend-up"><i class="fas fa-arrow-up"></i> 5.2%</div>
                        </div>
                        <div class="data-item">
                            <div class="value">‚Çπ1,980</div>
                            <div class="label">Rice (per quintal)</div>
                            <div class="price-trend trend-down"><i class="fas fa-arrow-down"></i> 2.1%</div>
                        </div>
                        <div class="data-item">
                            <div class="value">‚Çπ6,500</div>
                            <div class="label">Cotton (per quintal)</div>
                            <div class="price-trend trend-up"><i class="fas fa-arrow-up"></i> 8.7%</div>
                        </div>
                        <div class="data-item">
                            <div class="value">‚Çπ1,450</div>
                            <div class="label">Pulses (per quintal)</div>
                            <div class="price-trend trend-up"><i class="fas fa-arrow-up"></i> 3.4%</div>
                        </div>
                    </div>
                </div>
                
                <div class="feature-card">
                    <h3>Export Opportunities</h3>
                    <p>High demand for organic produce in European markets. Consider certification for premium pricing (30-40% above domestic rates).</p>
                </div>
                
                <div class="feature-card">
                    <h3>Government Schemes</h3>
                    <p>New subsidy announced for drip irrigation systems - up to 55% cost coverage for farms above 5 acres. Application deadline: 30 days.</p>
                </div>
                
                <div class="feature-card">
                    <h3>Market Forecast</h3>
                    <p>Next quarter expected to see increased demand for pulses and oilseeds due to changing dietary patterns. Consider adjusting crop allocation accordingly.</p>
                </div>
            </section>

            <!-- Equipment & Tech Hub Section -->
            <section id="equipment-tech-section" class="hidden">
                <button class="back-btn" id="back-to-dashboard-equipment">‚Üê Back to Dashboard</button>
                <h2 class="advanced">üöú Equipment & Technology Hub</h2>
                <p>Modernize your farm with the latest equipment and agricultural technology.</p>
                
                <div class="equipment-grid">
                    <div class="equipment-card">
                        <div class="equipment-image">
                            <i class="fas fa-tractor fa-4x"></i>
                        </div>
                        <div class="equipment-details">
                            <h4>Smart Tractor with GPS</h4>
                            <p>Precision farming with auto-steer technology</p>
                            <div class="equipment-price">‚Çπ8,50,000</div>
                            <button class="advanced" style="margin-top: 0.5rem; padding: 8px 15px; font-size: 0.9rem;">Get Quote</button>
                        </div>
                    </div>
                    
                    <div class="equipment-card">
                        <div class="equipment-image">
                            <i class="fas fa-tint fa-4x"></i>
                        </div>
                        <div class="equipment-details">
                            <h4>Drip Irrigation System</h4>
                            <p>Water-efficient irrigation with sensors</p>
                            <div class="equipment-price">‚Çπ45,000 per acre</div>
                            <button class="advanced" style="margin-top: 0.5rem; padding: 8px 15px; font-size: 0.9rem;">Get Quote</button>
                        </div>
                    </div>
                    
                    <div class="equipment-card">
                        <div class="equipment-image">
                            <i class="fas fa-drone fa-4x"></i>
                        </div>
                        <div class="equipment-details">
                            <h4>Agricultural Drone</h4>
                            <p>Precision spraying and crop monitoring</p>
                            <div class="equipment-price">‚Çπ2,25,000</div>
                            <button class="advanced" style="margin-top: 0.5rem; padding: 8px 15px; font-size: 0.9rem;">Get Quote</button>
                        </div>
                    </div>
                    
                    <div class="equipment-card">
                        <div class="equipment-image">
                            <i class="fas fa-robot fa-4x"></i>
                        </div>
                        <div class="equipment-details">
                            <h4>Automated Harvester</h4>
                            <p>Labor-efficient harvesting solution</p>
                            <div class="equipment-price">‚Çπ15,75,000</div>
                            <button class="advanced" style="margin-top: 0.5rem; padding: 8px 15px; font-size: 0.9rem;">Get Quote</button>
                        </div>
                    </div>
                    
                    <div class="equipment-card">
                        <div class="equipment-image">
                            <i class="fas fa-satellite fa-4x"></i>
                        </div>
                        <div class="equipment-details">
                            <h4>Soil Sensor Network</h4>
                            <p>Real-time soil health monitoring</p>
                            <div class="equipment-price">‚Çπ32,000</div>
                            <button class="advanced" style="margin-top: 0.5rem; padding: 8px 15px; font-size: 0.9rem;">Get Quote</button>
                        </div>
                    </div>
                    
                    <div class="equipment-card">
                        <div class="equipment-image">
                            <i class="fas fa-mobile-alt fa-4x"></i>
                        </div>
                        <div class="equipment-details">
                            <h4>Farm Management App</h4>
                            <p>Complete farm operations management</p>
                            <div class="equipment-price">‚Çπ999/year</div>
                            <button class="advanced" style="margin-top: 0.5rem; padding: 8px 15px; font-size: 0.9rem;">Free Trial</button>
                        </div>
                    </div>
                </div>
                
                <div class="feature-card">
                    <h3>Financing Options</h3>
                    <p>Special agricultural loans available at 4% interest rate for equipment purchases. Contact our financial partners for more information.</p>
                </div>
            </section>

            <section id="subsequent-mentor-matching" class="hidden">
                <h2>ü§ù Connect with Strategic Mentors</h2>
                <div id="subsequent-mentors-list"></div>
            </section>
            
            <section id="subsequent-communication" class="hidden">
                <h2>üí¨ Your Mentor Network</h2>
                <div class="tab-nav">
                    <button class="tab-btn active" data-tab-sub="connections-sub">My Mentors</button>
                    <button class="tab-btn" data-tab-sub="sessions-sub">Scheduled Sessions</button>
                </div>
                <div class="tab-content active" id="connections-sub-tab">
                    <div id="subsequent-my-mentors-list">
                        <p>You haven't connected with any mentors yet.</p>
                    </div>
                </div>
                <div class="tab-content" id="sessions-sub-tab">
                    <div id="subsequent-scheduled-sessions-list">
                        <p>You have no scheduled sessions.</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Scheduling Modal -->
    <div id="scheduling-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Schedule a Session</h2>
            <form id="scheduling-form">
                <div class="form-group">
                    <label for="session-mentor">Mentor</label>
                    <input type="text" id="session-mentor" readonly>
                </div>
                <div class="form-group">
                    <label for="session-date">Date</label>
                    <input type="date" id="session-date" required>
                </div>
                <div class="form-group">
                    <label for="session-time">Time</label>
                    <input type="time" id="session-time" required>
                </div>
                <div class="form-group">
                    <label>Session Type</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="session-online" name="session-type" value="online" checked>
                            <label for="session-online"><i class="fas fa-video"></i> Online</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="session-offline" name="session-type" value="offline">
                            <label for="session-offline"><i class="fas fa-map-marker-alt"></i> Offline</label>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="session-agenda">Agenda / What do you want to discuss?</label>
                    <textarea id="session-agenda" placeholder="e.g., Tips for scaling wheat production" required></textarea>
                </div>
                <button type="submit">Send Request</button>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- STATE MANAGEMENT ---
            let currentMentorId = null;
            let connectedMentors_Subsistent = [], connectedMentors_Subsequent = [];
            let scheduledSessions_Subsistent = [], scheduledSessions_Subsequent = [];
            let mentorProfiles = [];

            // --- DOM ELEMENT SELECTION ---
            const mentorForm = document.getElementById('mentor-form');
            const learnerForm = document.getElementById('learner-form');
            const subsequentForm = document.getElementById('subsequent-form');
            const schedulingForm = document.getElementById('scheduling-form');
            
            const expBtn = document.getElementById('experienced-farmer-btn');
            const subBtn = document.getElementById('subsistent-farmer-btn');
            const subSqBtn = document.getElementById('subsequent-farmer-btn');
            const expContent = document.getElementById('experienced-farmer-content');
            const subContent = document.getElementById('subsistent-farmer-content');
            const subSqContent = document.getElementById('subsequent-farmer-content');
            const userTypeRadios = document.querySelectorAll('input[name="user-type"]');
            
            const modal = document.getElementById('scheduling-modal');
            const modalCloseBtn = document.querySelector('.close');

            // Dashboard cards for subsequent farmer
            const findMentorCard = document.getElementById('find-mentor-card');
            const cropAnalysisCard = document.getElementById('crop-analysis-card');
            const marketIntelligenceCard = document.getElementById('market-intelligence-card');
            const equipmentTechCard = document.getElementById('equipment-tech-card');

            // Advanced feature sections
            const cropAnalysisSection = document.getElementById('crop-analysis-section');
            const marketIntelligenceSection = document.getElementById('market-intelligence-section');
            const equipmentTechSection = document.getElementById('equipment-tech-section');
            const subsequentDashboard = document.getElementById('subsequent-farmer-dashboard');
            const subsequentMentorMatching = document.getElementById('subsequent-mentor-matching');

            // Back buttons
            const backToDashboardCrop = document.getElementById('back-to-dashboard-crop');
            const backToDashboardMarket = document.getElementById('back-to-dashboard-market');
            const backToDashboardEquipment = document.getElementById('back-to-dashboard-equipment');

            // --- EVENT LISTENERS ---
            expBtn.addEventListener('click', () => switchUserType('experienced'));
            subBtn.addEventListener('click', () => switchUserType('subsistent'));
            subSqBtn.addEventListener('click', () => switchUserType('subsequent'));
            userTypeRadios.forEach(radio => radio.addEventListener('change', () => switchUserType(radio.value)));
            modalCloseBtn.addEventListener('click', () => modal.style.display = 'none');
            window.addEventListener('click', (event) => { if (event.target == modal) modal.style.display = 'none'; });
            
            mentorForm.addEventListener('submit', handleMentorProfileSubmission);
            learnerForm.addEventListener('submit', handleLearnerFormSubmission);
            subsequentForm.addEventListener('submit', handleSubsequentFormSubmission);
            schedulingForm.addEventListener('submit', handleSchedulingFormSubmission);
            
            // Dashboard card click listeners for subsequent farmer
            findMentorCard?.addEventListener('click', () => {
                subsequentDashboard.classList.add('hidden');
                cropAnalysisSection.classList.add('hidden');
                marketIntelligenceSection.classList.add('hidden');
                equipmentTechSection.classList.add('hidden');
                subsequentMentorMatching.classList.remove('hidden');
            });

            cropAnalysisCard?.addEventListener('click', () => {
                subsequentDashboard.classList.add('hidden');
                subsequentMentorMatching.classList.add('hidden');
                marketIntelligenceSection.classList.add('hidden');
                equipmentTechSection.classList.add('hidden');
                cropAnalysisSection.classList.remove('hidden');
            });

            marketIntelligenceCard?.addEventListener('click', () => {
                subsequentDashboard.classList.add('hidden');
                subsequentMentorMatching.classList.add('hidden');
                cropAnalysisSection.classList.add('hidden');
                equipmentTechSection.classList.add('hidden');
                marketIntelligenceSection.classList.remove('hidden');
            });

            equipmentTechCard?.addEventListener('click', () => {
                subsequentDashboard.classList.add('hidden');
                subsequentMentorMatching.classList.add('hidden');
                cropAnalysisSection.classList.add('hidden');
                marketIntelligenceSection.classList.add('hidden');
                equipmentTechSection.classList.remove('hidden');
            });

            // Back button listeners
            backToDashboardCrop?.addEventListener('click', () => {
                cropAnalysisSection.classList.add('hidden');
                subsequentDashboard.classList.remove('hidden');
            });

            backToDashboardMarket?.addEventListener('click', () => {
                marketIntelligenceSection.classList.add('hidden');
                subsequentDashboard.classList.remove('hidden');
            });

            backToDashboardEquipment?.addEventListener('click', () => {
                equipmentTechSection.classList.add('hidden');
                subsequentDashboard.classList.remove('hidden');
            });

            // Crop analysis button
            document.getElementById('analyze-crops-btn')?.addEventListener('click', () => {
                document.getElementById('crop-analysis-results').classList.remove('hidden');
            });
            
            // Tab listeners for both learner types
            document.querySelectorAll('.tab-btn[data-tab]').forEach(btn => {
                btn.addEventListener('click', () => switchTab(btn.getAttribute('data-tab'), ''));
            });
            document.querySelectorAll('.tab-btn[data-tab-sub]').forEach(btn => {
                btn.addEventListener('click', () => switchTab(btn.getAttribute('data-tab-sub'), '-sub'));
            });

            // --- HELPER FUNCTIONS ---
            function switchUserType(type) {
                [expBtn, subBtn, subSqBtn].forEach(btn => btn.classList.remove('active'));
                [expContent, subContent, subSqContent].forEach(content => content.classList.add('hidden'));
                
                if (type === 'experienced') { 
                    expBtn.classList.add('active'); 
                    expContent.classList.remove('hidden'); 
                } else if (type === 'subsistent') { 
                    subBtn.classList.add('active'); 
                    subContent.classList.remove('hidden'); 
                } else if (type === 'subsequent') { 
                    subSqBtn.classList.add('active'); 
                    subSqContent.classList.remove('hidden'); 
                }
            }

            function switchTab(tabId, suffix) {
                const nav = document.querySelector(suffix ? `.tab-btn[data-tab-sub="${tabId}"]` : `.tab-btn[data-tab="${tabId}"]`);
                const content = document.getElementById(`${tabId}${suffix}-tab`);
                
                if (!nav || !content) return;

                document.querySelectorAll(suffix ? `.tab-btn[data-tab-sub]` : `.tab-btn[data-tab]`).forEach(b => b.classList.remove('active'));
                document.querySelectorAll(suffix ? `.tab-content[id$="-sub-tab"]` : `.tab-content[id$="-tab"]`).forEach(c => c.classList.remove('active'));
                
                nav.classList.add('active');
                content.classList.add('active');
            }

            function getMentorById(id) { 
                return mentorProfiles.find(m => m.id === id); 
            }

            // --- HANDLERS ---
            function handleMentorProfileSubmission(e) {
                e.preventDefault();
                const newMentor = {
                    id: Date.now(),
                    name: document.getElementById('mentor-name').value,
                    region: document.getElementById('mentor-region').value,
                    contact: document.getElementById('mentor-contact').value,
                    experience: document.getElementById('mentor-experience').value,
                    specialties: Array.from(document.querySelectorAll('input[name="specialties"]:checked')).map(cb => cb.value),
                    bio: document.getElementById('mentor-bio').value,
                    rating: 0,
                    mentees: 0
                };
                mentorProfiles.push(newMentor);
                document.getElementById('mentor-profile-section').classList.add('hidden');
                document.getElementById('mentor-dashboard').classList.remove('hidden');
                document.getElementById('dashboard-profile-info').innerHTML = `
                    <strong>Name:</strong> ${newMentor.name}<br>
                    <strong>Region:</strong> ${newMentor.region}<br>
                    <strong>Specialties:</strong> ${newMentor.specialties.join(', ')}<br>
                    <strong>Bio:</strong> ${newMentor.bio}
                `;
                mentorForm.reset();
            }
            
            function handleLearnerFormSubmission(e) {
                e.preventDefault();
                const region = document.getElementById('learner-region').value;
                document.getElementById('mentor-matching').classList.remove('hidden');
                document.getElementById('communication').classList.remove('hidden');
                displayMatchingMentors(region, 'subsistent');
                document.getElementById('mentor-matching').scrollIntoView({ behavior: 'smooth' });
            }

            function handleSubsequentFormSubmission(e) {
                e.preventDefault();
                const region = document.getElementById('subsequent-region').value;
                document.getElementById('subsequent-farmer-setup').classList.add('hidden');
                document.getElementById('subsequent-farmer-dashboard').classList.remove('hidden');
                document.getElementById('subsequent-mentor-matching').classList.remove('hidden');
                document.getElementById('subsequent-communication').classList.remove('hidden');
                displayMatchingMentors(region, 'subsequent');
                document.getElementById('subsequent-farmer-dashboard').scrollIntoView({ behavior: 'smooth' });
            }

            function handleSchedulingFormSubmission(e) {
                e.preventDefault();
                const session = {
                    id: Date.now(),
                    mentorId: currentMentorId,
                    mentorName: document.getElementById('session-mentor').value,
                    date: document.getElementById('session-date').value,
                    time: document.getElementById('session-time').value,
                    type: document.querySelector('input[name="session-type"]:checked').value,
                    agenda: document.getElementById('session-agenda').value,
                    status: 'Requested'
                };
                
                const isSubsequent = !subSqContent.classList.contains('hidden');
                if (isSubsequent) {
                    scheduledSessions_Subsequent.push(session);
                    displayScheduledSessions('subsequent');
                } else {
                    scheduledSessions_Subsistent.push(session);
                    displayScheduledSessions('subsistent');
                }
                
                modal.style.display = 'none';
                schedulingForm.reset();
                alert('Session request sent successfully!');
            }
            
            // --- DISPLAY FUNCTIONS ---
            function displayMatchingMentors(region, userType) {
                const listId = userType === 'subsequent' ? 'subsequent-mentors-list' : 'mentors-list';
                const matchingMentors = mentorProfiles.filter(mentor => mentor.region === region);
                let mentorsHTML = '';
                
                if (matchingMentors.length === 0) {
                    mentorsHTML = `<p>No mentors found in your region. Please check back later.</p>`;
                } else {
                    matchingMentors.forEach(mentor => {
                        const isConnected = userType === 'subsequent' ? 
                            connectedMentors_Subsequent.some(m => m.id === mentor.id) : 
                            connectedMentors_Subsistent.some(m => m.id === mentor.id);
                        
                        mentorsHTML += `
                            <div class="mentor-card">
                                <div class="mentor-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="mentor-info">
                                    <h3>${mentor.name}</h3>
                                    <p>${mentor.bio}</p>
                                    <p><strong>Experience:</strong> ${mentor.experience} years</p>
                                    <div class="mentor-specialties">
                                        ${mentor.specialties.map(s => `<span class="specialty-tag">${s}</span>`).join('')}
                                    </div>
                                </div>
                                <div class="mentor-actions">
                                    <button class="connect-btn" data-mentor-id="${mentor.id}" data-user-type="${userType}" ${isConnected ? 'disabled' : ''}>
                                        ${isConnected ? 'Connected' : 'Connect'}
                                    </button>
                                </div>
                            </div>
                        `;
                    });
                }
                
                document.getElementById(listId).innerHTML = mentorsHTML;
                
                document.querySelectorAll('.connect-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const mentorId = parseInt(btn.getAttribute('data-mentor-id'));
                        const uType = btn.getAttribute('data-user-type');
                        const mentor = getMentorById(mentorId);
                        
                        if (!mentor) return;
                        
                        let list = uType === 'subsequent' ? connectedMentors_Subsequent : connectedMentors_Subsistent;
                        if (!list.some(m => m.id === mentorId)) {
                            list.push(mentor);
                            btn.textContent = 'Connected';
                            btn.disabled = true;
                            displayMyMentors(uType);
                        }
                    });
                });
            }

            function displayMyMentors(userType) {
                const listId = userType === 'subsequent' ? 'subsequent-my-mentors-list' : 'my-mentors-list';
                const list = userType === 'subsequent' ? connectedMentors_Subsequent : connectedMentors_Subsistent;
                
                if (list.length === 0) {
                    document.getElementById(listId).innerHTML = '<p>You haven\'t connected with any mentors yet.</p>';
                    return;
                }
                
                let mentorsHTML = '';
                list.forEach(mentor => {
                    mentorsHTML += `
                        <div class="mentor-card">
                            <div class="mentor-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="mentor-info">
                                <h3>${mentor.name}</h3>
                                <p><strong>Specialties:</strong> ${mentor.specialties.join(', ')}</p>
                            </div>
                            <div class="mentor-actions">
                                <button class="secondary schedule-btn" data-mentor-id="${mentor.id}" data-mentor-name="${mentor.name}" data-user-type="${userType}">
                                    Schedule Session
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                document.getElementById(listId).innerHTML = mentorsHTML;
                
                document.querySelectorAll('.schedule-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        currentMentorId = parseInt(btn.getAttribute('data-mentor-id'));
                        document.getElementById('session-mentor').value = btn.getAttribute('data-mentor-name');
                        modal.style.display = 'block';
                    });
                });
            }

            function displayScheduledSessions(userType) {
                const listId = userType === 'subsequent' ? 'subsequent-scheduled-sessions-list' : 'scheduled-sessions-list';
                const list = userType === 'subsequent' ? scheduledSessions_Subsequent : scheduledSessions_Subsistent;
                
                if (list.length === 0) {
                    document.getElementById(listId).innerHTML = '<p>You have no scheduled sessions.</p>';
                    return;
                }
                
                let sessionsHTML = '';
                list.forEach(session => {
                    sessionsHTML += `
                        <div class="session-card">
                            <div class="session-info">
                                <h4>with ${session.mentorName}</h4>
                                <p><i class="fas fa-calendar"></i> ${new Date(session.date).toLocaleDateString()} at ${session.time}</p>
                                <p><strong>Agenda:</strong> ${session.agenda}</p>
                            </div>
                            <div>
                                <span class="session-type-badge ${session.type}">${session.type}</span>
                                <p style="margin-top: 0.5rem; font-size: 0.8rem; color: #777;">Status: ${session.status}</p>
                            </div>
                        </div>
                    `;
                });
                
                document.getElementById(listId).innerHTML = sessionsHTML;
            }
            
            // --- INITIALIZATION ---
            mentorProfiles = [
                { 
                    id: 101, 
                    name: 'Ramesh Kumar', 
                    region: 'Karnataka', 
                    contact: '9876543210', 
                    experience: 20, 
                    specialties: ['Organic Farming', 'Irrigation'], 
                    bio: 'I have been practicing organic farming for over 15 years and specialize in water-efficient irrigation techniques.', 
                    rating: 4.8, 
                    mentees: 12 
                }, 
                { 
                    id: 102, 
                    name: 'Priya Sharma', 
                    region: 'Maharashtra', 
                    contact: '9876543211', 
                    experience: 15, 
                    specialties: ['Pest Management', 'Crop Rotation'], 
                    bio: 'Agricultural graduate with expertise in natural pest management and sustainable crop rotation practices.', 
                    rating: 4.9, 
                    mentees: 18 
                }, 
                { 
                    id: 103, 
                    name: 'Gurpreet Singh', 
                    region: 'Punjab', 
                    contact: '9876543212', 
                    experience: 25, 
                    specialties: ['Organic Farming', 'Crop Rotation'], 
                    bio: 'Third-generation farmer with deep knowledge of traditional and modern farming techniques.', 
                    rating: 4.7, 
                    mentees: 9 
                } 
            ];
        });
    </script>
</body>
</html>